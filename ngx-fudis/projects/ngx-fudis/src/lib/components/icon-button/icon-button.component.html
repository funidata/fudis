@if (popoverText) {
  <button
    fudisPopover
    #buttonElement
    [class]="_classList | async"
    type="button"
    (click)="!disabled && buttonClick($event)"
    (blur)="!disabled && _handleButtonBlur($event)"
    (focus)="!disabled && _handleButtonFocus($event)"
    (keydown)="(!disabled)"
    [attr.tabIndex]="disabled ? -1 : null"
    [attr.aria-disabled]="disabled || null"
    [attr.aria-label]="ariaLabel"
    [attr.id]="id"
    [popoverPosition]="popoverPosition"
    [popoverText]="popoverText"
    >
    @if (icon) {
      <div [class]="_iconMargin | async">
        @if (_iconColor | async; as iconColor) {
          <fudis-icon
            class="fudis-button__icon__component"
            [color]="iconColor"
            [icon]="icon"
            [rotate]="iconRotate"
          ></fudis-icon>
        }
      </div>
    }
  </button>
}

@if (!popoverText) {
  <button
    #buttonElement
    [class]="_classList | async"
    type="button"
    (click)="!disabled && buttonClick($event)"
    (blur)="!disabled && _handleButtonBlur($event)"
    (focus)="!disabled && _handleButtonFocus($event)"
    (keydown)="(!disabled)"
    [attr.tabIndex]="disabled ? -1 : null"
    [attr.aria-disabled]="disabled || null"
    [attr.aria-label]="ariaLabel"
    [attr.id]="id"
    [attr.aria-expanded]="!asMenuButton ? null : (dropdownOpen | async)"
    [attr.aria-controls]="
      asMenuButton && dropdownMenuId && (dropdownOpen | async) ? dropdownMenuId : null
    "
    [attr.aria-haspopup]="!asMenuButton ? null : 'menu'"
    >
    @if (icon) {
      <div [class]="_iconMargin | async">
        @if (_iconColor | async; as iconColor) {
          <fudis-icon
            class="fudis-button__icon__component"
            [color]="iconColor"
            [icon]="icon"
            [rotate]="iconRotate"
          ></fudis-icon>
        }
      </div>
    }</button>
  }

  @if (asMenuButton && (dropdownOpen | async)) {
    <ng-content></ng-content>
  }
