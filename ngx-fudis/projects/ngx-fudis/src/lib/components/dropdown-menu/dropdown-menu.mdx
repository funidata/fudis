import { ArgTypes, Meta, Canvas } from "@storybook/addon-docs/blocks";
import { linkTo } from "@storybook/addon-links";
import { Source } from "@storybook/addon-docs/blocks";
import { DropdownMenuComponent } from "./dropdown-menu.component.ts";
import { DropdownMenuItemComponent } from "./dropdown-menu-item/dropdown-menu-item.component.ts";
import { DropdownMenuGroupComponent } from "./dropdown-menu-group/dropdown-menu-group.component.ts";
import * as DropdownMenuStories from "./dropdown-menu.stories.ts";
import { dropdownMenuExclude, dropdownMenuItemExclude } from "../../utilities/storybook";
import * as VersionSelectorStories from "../../../storybook-docs/version-selector/version-selector.stories";

<Meta title="Components/Dropdown Menu" />

# Dropdown Menu

Dropdown Menu is used to offer various functions related to the current view.

## Usage Guidelines

Dropdown Menu is assembled with [IconButton](/docs/components-iconbutton--documentation), DropdownMenu and DropdownMenuItem components and it has certain guidelines and pattern to follow in order to work as designed.

Dropdown opening alignment can be altered with `align` property. Default value is `center` where the dropdown tries to find the optimal place for opening.
Fixed opening positions can be assigned to `left` or `right`.

Size (i.e. width) of the dropdown can be adjusted with `size` property with available options of `sm`, `md`, `lg`.

### Grouped Items

Dropdown Menu Items can be grouped under different sub-categories if needed. The same functionality can be found from [Select Component](/docs/components-form-select-common-features--documentation#grouping-options) family.

To group items, wrap them using `DropdownMenuGroupComponent` with `fudis-dropdown-menu-group` selector, it requires `label` property.

## Examples

<Canvas of={DropdownMenuStories.Example} />

### Code Example For Basic Dropdown Menu

<Source
  code={`
<fudis-icon-button
 [ariaLabel]="'Basic menu'"
 [size]="'small'"
 [variant]="'secondary'"
 [icon]="'three-dots'"
 [asMenuButton]="true">
  <fudis-dropdown-menu>
    @for (item of menuItems; track item.label) {
    <fudis-dropdown-menu-item
      [label]="item.label"
      [disabled]="item.disabled"
      (handleClick)="clickOption($event)">
    </fudis-dropdown-menu-item>
    }
  </fudis-dropdown-menu>
</fudis-icon-button>`}
/>

### Code Example For Grouped Items Dropdown Menu

<Source
  code={`
<fudis-icon-button
 [ariaLabel]="'Grouped items menu'"
 [size]="'small'"
 [variant]="'secondary'"
 [icon]="'three-dots'"
 [asMenuButton]="true">
 <fudis-dropdown-menu [align]="'left'" [size]="'md'">
  @for (group of groupedMenuItems; track group.label) {
  <fudis-dropdown-menu-group
    [label]="group.label">
      @for (groupedItem of group.items; track groupedItem.label) {
      <fudis-dropdown-menu-item
        [label]="groupedItem.label"
        [disabled]="groupedItem.disabled"
        (handleClick)="clickOption($event)">
      </fudis-dropdown-menu-item>
      }
  </fudis-dropdown-menu-group>
  }
 </fudis-dropdown-menu>
</fudis-icon-button>`}
/>

### Accessibility

- Button has visible focus state
- Button click can be triggered with mouse as well as keyboard <code>enter</code> and <code>space</code> keys
- Dropdown menu items can be toggled with <code>arrow down</code> and <code>arrow up</code> keys
  - Dropdown menu item click can be triggered with mouse as well as keyboard <code>enter</code> and <code>space</code> key

### Related components

- [IconButton](/docs/components-iconbutton--documentation)
- [Icon](/docs/components-icon--documentation)

## Dropdown Menu Properties

<ArgTypes of={DropdownMenuComponent} exclude={dropdownMenuExclude} />

## Dropdown Menu Group Properties

<ArgTypes of={DropdownMenuGroupComponent} exclude={dropdownMenuExclude} />

## Dropdown Menu Item Properties

<ArgTypes of={DropdownMenuItemComponent} exclude={dropdownMenuItemExclude} />
