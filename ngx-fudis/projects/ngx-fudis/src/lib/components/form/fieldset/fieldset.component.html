<div
  fudisGrid
  [align]="align"
  [width]="inputSize ? 'initial' : width"
  [serviceDefaults]="false"
  [rowGap]="'none'"
>
  <fieldset [attr.id]="id" [tabIndex]="-1" [ngClass]="_classes">
    <legend class="fudis-fieldset__legend">
      <div
        #fieldsetLegend
        class="fudis-fieldset__legend__main fudis-fieldset__legend__{{ labelSize }}"
        [class.fudis-fieldset__legend--focused]="_legendFocusVisible"
        [attr.id]="id + '-legend'"
        [tabIndex]="-1"
        (focus)="_handleFocus($event)"
        (blur)="_handleLegendBlur()"
      >
        <div class="fudis-fieldset__legend__main__text-content">
          <span class="fudis-fieldset__legend__main__text"
            >{{ label }}<span *ngIf="required" class="fudis-fieldset__legend__main__space"></span
            ><span *ngIf="required" class="fudis-fieldset__legend__main__required"
              >({{ _translationService.getTranslations()().REQUIRED }})</span
            >
          </span>
          <div
            aria-hidden="true"
            class="fudis-fieldset__legend__main__group-helptext fudis-visually-hidden"
          ></div>
        </div>
        <fudis-button
          *ngIf="popoverText && popoverTriggerLabel"
          class="fudis-fieldset__legend__main__popover-button"
          [size]="'icon-only'"
          [variant]="'tertiary'"
          [icon]="'info-circle'"
          [labelHidden]="true"
          [popoverText]="popoverText"
          [popoverPosition]="popoverPosition"
          [label]="popoverTriggerLabel"
        />
      </div>
    </legend>
    <fudis-body-text *ngIf="helpText" class="fudis-fieldset__help-text" [variant]="'sm-regular'">{{
      helpText
    }}</fudis-body-text>
    <ng-content select="fudis-fieldset-actions"></ng-content>
    <ng-content select="fudis-fieldset-content"></ng-content>
  </fieldset>
</div>
