<div
  fudisGrid
  [align]="align"
  [width]="inputSize ? 'initial' : width"
  [serviceDefaults]="false"
  [rowGap]="'none'"
>
  <fieldset
    [attr.id]="id"
    [tabIndex]="-1"
    [ngClass]="_classes"
    [attr.aria-describedby]="describedbyId ? describedbyId : null"
    (focus)="_handleFocus($event)"
  >
    <legend
      #fieldsetLegend
      class="fudis-fieldset__legend"
      [class.fudis-fieldset__legend--focused]="_legendFocusVisible"
      [attr.id]="id + '-legend'"
      [tabIndex]="-1"
      (blur)="_handleLegendBlur()"
    >
      <div
        class="fudis-fieldset__legend__container"
        [class.fudis-fieldset__legend__container__row-end]="alignActions === 'end'"
        [class.fudis-fieldset__legend__container__column]="alignActions === 'bottom'"
        [class.fudis-fieldset__legend__container__row-start]="alignActions === 'start'"
      >
        <div
          class="fudis-fieldset__legend__title"
          [class.fudis-fieldset__legend__title__with-inputs]="inputSize"
        >
          <div
            class="fudis-fieldset__legend__title__main fudis-fieldset__legend__title__main__{{
              labelSize
            }}"
          >
            <span class="fudis-fieldset__legend__title__text"
              >{{ label
              }}<span *ngIf="required" class="fudis-fieldset__legend__title__text__required">
                ({{ _requiredText | async }})</span
              ></span
            >
            <ng-container *ngIf="tooltip">
              <fudis-button
                class="fudis-fieldset__legend__tooltip-button"
                [size]="'icon-only'"
                [variant]="'tertiary'"
                [icon]="'info-circle'"
                [labelHidden]="true"
                [label]="tooltip"
                [tooltip]="tooltip"
                [tooltipPosition]="tooltipPosition"
                [tooltipToggle]="tooltipToggle"
              />
            </ng-container>
          </div>
          <ng-container *ngIf="helpText">
            <span class="fudis-fieldset__legend__help-text">{{ helpText }}</span>
          </ng-container>
        </div>
        <ng-content select="fudis-fieldset-actions"></ng-content>
      </div>
    </legend>
    <div class="fudis-fieldset">
      <ng-content select="fudis-fieldset-content"></ng-content>
    </div>
  </fieldset>
</div>
