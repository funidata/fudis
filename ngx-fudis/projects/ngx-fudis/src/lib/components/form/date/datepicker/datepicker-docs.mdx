import { ArgTypes, Meta, Canvas } from "@storybook/blocks";
import { linkTo } from "@storybook/addon-links";
import { DatepickerComponent } from "./datepicker.component";
import * as DatepickerStories from "./datepicker.stories.ts";
import { datepickerExclude } from "../../../../utilities/storybook";

<Meta title="Components/Form/Date/Datepicker" />

# Datepicker

Datepicker allows user to select a date either from calendar pop-up or by typing it to the text input.

Datepicker is built with the help of [Angular Material's Datepicker](https://material.angular.io/components/datepicker/overview).

## Examples

<Canvas of={DatepickerStories.Datepicker} />

## Usage Guidelines

### Mandatory Properties

Datepicker requires `control` and `label` properties.

```
<fudis-datepicker
	[label]="'Select a date'"
	[control]="control" />
```

### Optional properties

Popover can be included in the datepicker fieldset with properties from [Popover Directive](/docs/directives-popover--documentation). It also requires an additional label `popoverTriggerLabel` for the button that triggers the popover. This label is only visible for the screenreaders.

### Validators and Error Handling

Fudis form components use Fudis Validators. See the full documentation on [how to use Fudis Validators](/docs/utilities-validators--documentation).

**Datepicker validators**

- required
- datepickerMin
- datepickerMax

If a custom validation is used, read [how to add Error message](/docs/components-form-error-message--documentation).

In addition Datepicker has internal **date format validator** which prompts error message if Fudis is not satisfied with given date's format. This validator can be turned off by setting `dateParse` to `false`.

## Localization

Currently datepicker parses the display date to Finnish format of <code>DD.MM.YYYY</code> and calendar's first day of the week is Monday by default.

The language of the calendar listens to <code>lang</code> attribute value of <code>html</code> element, e.g. `<html lang="fi">`. This localizes date picker calendar to respective supported language.

Current list of languages supported are:

- English, `lang="en"` which translates to ISO language value of 'en-GB'
- Finnish, `lang="fi"` which translates to ISO language value of 'fi-FI'
- Swedish, `lang="sv"` which translates to ISO language value of 'sv-SE'

## Accessibility

- Datepicker has label and id connected to the input
- Guidance and error messages are connected to the input via id
- Datepicker has a visible focus state both on input and calendar icon
- Calendar dialog can be triggered from the calendar icon with keyboard <code>enter</code> and <code>space</code> key
- User can navigate inside the calendar dialog with keyboard <code>arrow</code> keys
- User can type the date directly to the input without opening the calendar dialog

## Related components

[Icon](/docs/components-icon--documentation)

[Date Range](/docs/components-form-date-date-range--documentation)

[Angular Material Datepicker](https://material.angular.io/components/datepicker/overview)

## Related directives

[Popover](/docs/directives-popover--documentation)

## Properties

<ArgTypes of={DatepickerComponent} exclude={datepickerExclude} />
