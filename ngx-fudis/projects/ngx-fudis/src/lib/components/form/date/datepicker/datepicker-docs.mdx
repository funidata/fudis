import { ArgTypes, Meta, Canvas } from "@storybook/blocks";
import { linkTo } from "@storybook/addon-links";
import { DatepickerComponent } from "./datepicker.component";
import * as DatepickerStories from "./datepicker.stories.ts";
import { datepickerExclude } from "../../../../utilities/storybook";

<Meta title="Components/Form/Datepicker" />

# Datepicker

Datepicker allows user to select a date either from calendar pop-up or by typing it to the text input.

Datepicker is built with the help of [Angular Material's Datepicker](https://material.angular.io/components/datepicker/overview).

## Examples

<Canvas of={DatepickerStories.Datepicker}></Canvas>

## Usage Guidelines

### Mandatory Properties

Datepicker requires `control` and `label` properties.

```
<fudis-datepicker
	[label]="'Select a date'"
	[control]="control" />
```

### Validators and Error Handling

Fudis form components use Fudis Validators. See the full documentation on [how to use Fudis Validators](/docs/utilities-validators--documentation).

If a custom validation is used, read [how to add Error message](/docs/components-form-error-message--documentation).

**Datepicker validators**

- required
- datepickerMin
- datepickerMax

In addition Fudis has internal validator for date format which prompts error message if Fudis is not satisfied with given date's format. This validator can be turned off by setting `parseDateValidator` to `false`.

## Localization

Currently datepicker parses the display date to Finnish format of <code>DD.MM.YYYY</code> and calendar's first day of the week is Monday by default.

The language of the calendar listens to <code>lang</code> attribute value of <code>html</code> element, e.g. `<html lang="fi">`. This localizes date picker calendar to respective supported language.

Current list of languages supported are:

- English, `lang="en"` which translates to ISO language value of 'en-GB'
- Finnish, `lang="fi"` which translates to ISO language value of 'fi-FI'
- Swedish, `lang="sv"` which translates to ISO language value of 'sv-SE'

## Accessibility

- Datepicker has label and id connected to the input
- Guidance and error messages are connected to the input via id
- Datepicker has a visible focus state both on input and calendar icon
- Calendar dialog can be triggered from the calendar icon with keyboard <code>enter</code> and <code>space</code> key
- User can navigate inside the calendar dialog with keyboard <code>arrow</code> keys
- User can type the date directly to the input without opening the calendar dialog
- Input can be focused even if it is disabled

## Related components

[Icon](/docs/components-icon--documentation)

[Angular Material Datepicker](https://material.angular.io/components/datepicker/overview)

## Related directives

[Tooltip](/docs/directives-tooltip--documentation)

## Properties

<ArgTypes of={DatepickerComponent} exclude={datepickerExclude} />
