<form
  fudisGrid
  [id]="id"
  [attr.aria-describedby]="id + '_header'"
  [width]="width"
  [align]="align"
  [serviceDefaults]="false"
  [alignItemsX]="alignItemsX"
  [alignItemsY]="alignItemsY"
  [classes]="'fudis-form'"
  [columnGap]="columnGap"
  [rowGap]="'none'"
>
  <div [id]="id + '_header'" class="fudis-form__header">
    <div class="fudis-form__header__main">
      <div class="fudis-form__header__title">
        <ng-container *ngIf="_dialogParent">
          <fudis-heading
            class="fudis-form__header__title__dialog fudis-mb-xs"
            fudisDialogTitle
            [variant]="_titleVariant"
            [level]="level"
            >{{ title
            }}<ng-container *ngIf="badge && badgeText">
              <fudis-badge
                class="fudis-form__header__title__badge"
                [variant]="badge"
                [content]="badgeText"
              />
            </ng-container>
          </fudis-heading>
        </ng-container>
        <ng-container *ngIf="!_dialogParent">
          <fudis-heading class="fudis-mb-xs" [variant]="titleVariant" [level]="level"
            >{{ title
            }}<ng-container *ngIf="badge && badgeText">
              <fudis-badge
                class="fudis-form__header__title__badge"
                [variant]="badge"
                [content]="badgeText"
              />
            </ng-container>
          </fudis-heading>
        </ng-container>
        <ng-container *ngIf="helpText">
          <fudis-body-text class="fudis-mb-xs">{{ helpText }}</fudis-body-text>
        </ng-container>
      </div>
      <ng-container *ngIf="_headerContent">
        <div class="fudis-form__header__main__content">
          <ng-container *ngTemplateOutlet="_headerContent!.templateRef" />
        </div>
      </ng-container>
      <ng-container *ngIf="_formElement !== undefined && errorSummaryVisible && !_dialogParent">
        <fudis-error-summary
          [formId]="id"
          [parentComponent]="_formElement"
          [helpText]="errorSummaryHelpText"
        />
      </ng-container>
    </div>
  </div>
  <ng-container *ngIf="_headerActions?.type === 'form' && !_dialogParent">
    <div class="fudis-form__header__actions">
      <ng-container *ngTemplateOutlet="_headerActions!.templateRef" />
    </div>
  </ng-container>
  <ng-container *ngIf="_mainContent?.type === 'form'">
    <div class="fudis-form__content">
      <ng-container *ngIf="_formElement !== undefined && errorSummaryVisible && _dialogParent">
        <fudis-error-summary
          [formId]="id"
          [parentComponent]="_formElement"
          [helpText]="errorSummaryHelpText"
        />
      </ng-container>
      <ng-container *ngTemplateOutlet="_mainContent!.templateRef" />
    </div>
  </ng-container>
  <ng-container *ngIf="_headerActions?.type === 'form' && _dialogParent">
    <div class="fudis-form__header__actions__dialog">
      <ng-container *ngTemplateOutlet="_headerActions!.templateRef" />
    </div>
  </ng-container>
</form>
