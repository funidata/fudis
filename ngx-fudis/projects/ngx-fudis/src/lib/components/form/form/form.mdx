import { Meta, ArgTypes } from "@storybook/blocks";
import { FormComponent } from "./form.component";
import { formArgTypesExclude } from "../../../utilities/storybook";

<Meta title="Components/Form/Form" />

# Form

Form Component is a layout component which enables semantically coherent and easy flow for building forms. It constructs from three main sections: header content, header actions and main content.

## Mandatory and Commonly Used Properties

### Heading

Form is not valid without a heading.

Mandatory properties are `title` (visual heading) and `level` (semantic heading level), additionally it is possible to change the variant (visual size) of the heading with `titleVariant`, which otherwise defaults to corresponding level value.

See possible heading levels and variants from [Heading Documentation](/docs/components-typography-heading--documentation).

#### Badge

Badge can be attached to form heading by adding `badge` (variant) and `badgeText` (text content) properties.
See badge variants from [Badge Documentation](/docs/components-badge--documentation).

### Error Summary

`errorSummaryVisible`: Boolean property controlling the visibility of the Error Summary. This is automatically managed if your Form has Button with `fudisFormSubmit` directive with boolean property `formValid`. Further documentation of [Form Submit Directive](/docs/directives-form-actions--documentation).

`errorSummaryTitle`: Title displayed as describing guidance text for the Error Summary.

More about [Error Summary](/docs/components-form-error-summary--documentation) and [Error Summary Service](/docs/services-error-summary--documentation).

### Layout

Form Component extends Grid Api Directive which allows the modification and usage of most of the [Grid properties](/docs/directives-grid-grid--documentation).
The complete list of allowed properties can be found from Properties table at the bottom of this page.

## Content Directives

**fudis-form-header**: Header content is optional information displayed under the actual form heading.
There are no restrictions on content, but it is adviced to only add instructions and other non-interactive content to the header.

```
<fudis-form-header>
  <your-content-here />
</fudis-form-header>
```

**fudis-form-actions**: Form Actions are buttons positioned on top of the form.
Form actions are assigned through Fudis Form Actions Directive.

There are no restrictions on Form Actions content, but it is advised to interactive button elements only. Including Button Component with [Form Submit directive](/docs/directives-form-actions--documentation#form-submit-with-button) makes it easier to control visibility of Form's Error Summary.

```
<fudis-form-actions>
  <fudis-button fudisFormSubmit [formValid]="myForm.valid" [label]="'Submit form'" (handleClick)="myFormSubmit()" />
  ...other content
</fudis-form-actions>
```

**fudis-form-content**: Form main content is where the form components live.
There are no restrictions on main content but it is advised to use Form Components provided by Fudis as this enables [Error Summary](/docs/components-form-error-summary--documentation) logic with less effort.

```
<fudis-form-content>
  <your-content-here />
</fudis-form-content>
```

## Code Example

This is a simple example on how to use Form Component.

```
// HTML Template

<fudis-form
  [title]="'Example form heading'"
  [level]="2"
  [helpText]="'Here is some more information about this form'"
>
  <fudis-form-header>
    <fudis-body-text>Even more additional Form information</fudis-body-text>
  </fudis-form-header>
  <fudis-form-actions>
    <fudis-button fudisFormSubmit [formValid]="formExample.valid" [label]="'Submit'" (handleClick)="submitForm()" />
  </fudis-form-actions>
  <fudis-form-content>
    <fudis-text-input
      [label]="'Example text-input'"
      [control]="formExample.controls.exampleTextInput"
    />
  </fudis-form-content>
</fudis-form>

// TypeScript

formExample = new FormGroup({
  exampleTextInput: new FormControl(null, FudisValidators.required('This field is required')),
});

submitForm(): void {
 // Other logic you need to do on submit
}
```

## Properties

<ArgTypes of={FormComponent} exclude={formArgTypesExclude} />
