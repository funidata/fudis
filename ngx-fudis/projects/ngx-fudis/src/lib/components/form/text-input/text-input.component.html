<div class="fudis-text-input fudis-input-size__{{ size }}">
  <fudis-label
    [for]="id"
    [id]="id + '-label'"
    [text]="label"
    [required]="_required | async"
    [parentSize]="size"
    [popoverPosition]="popoverPosition"
    [popoverText]="popoverText"
    [popoverTriggerLabel]="popoverTriggerLabel"
  />
  <input
    #inputRef
    class="fudis-form-input fudis-text-input__input"
    [id]="id"
    [formControl]="control"
    (blur)="handleBlur.emit($event)"
    (keyup)="handleKeyUp.emit($event)"
    (focus)="onFocus($event)"
    [attr.step]="type === 'number' ? step : null"
    [attr.autocomplete]="autocomplete"
    [attr.minlength]="_minLength | async"
    [attr.maxlength]="_maxLength | async"
    [attr.min]="_minNumber | async"
    [attr.max]="_maxNumber | async"
    [attr.name]="name"
    [attr.required]="(_required | async) || null"
    [attr.tabindex]="disabled ? -1 : null"
    [attr.type]="type"
    [attr.aria-describedby]="id + '_guidance'"
    [attr.aria-disabled]="control.disabled || disabled || null"
    [attr.aria-invalid]="(control.invalid && control.touched) || null"
    [attr.aria-label]="ariaLabel"
    [readonly]="control.disabled || disabled || null"
  />
  @if (!disableGuidance) {
    <fudis-guidance
      [control]="control"
      [for]="id"
      [helpText]="helpText"
      [inputLabel]="label"
      [maxLength]="_maxLength | async"
    >
      <ng-content select="fudis-error-message" />
    </fudis-guidance>
  }
</div>
