import { Meta } from "@storybook/blocks";

<Meta title="Documentation/Development/Tooling/Creating Release" />

# Creating a Release

New versions are published to NPM using GitHub Releases. After tagging and creating a release on GitHub, an automatic workflow handles packaging and publishing Fudis to NPM.

## Versioning

Fudis uses [semantic versioning](https://semver.org/).

### Patch

Patch updates are interchangeable, meaning clients can upgrade or downgrade freely between versions.\
**Example:** Bug fix, interval tweak.

### Minor

Minor updates are compatible with previous versions and usually includes additional features.\
**Example:** New features, old features declared as deprecated.

### Major

Major changes are backward incompatible and will have breaking changes.\
**Example:** Changes in API endpoint name, remove of an endpoint.

## Release notes

Find release notes for the latest [Fudis Version](https://github.com/funidata/fudis/releases).

## Release Pipeline

**Steps for creating a new release:**

- Depending on the changes included in the release, run the following command with the correct argument `npm run fudis-release -- <major|minor|patch>`. **Example:** `npm run fudis-release -- patch`
  > This will run a release shell script which creates a new branch named `release` and automatically runs `npm version` command with given argument.\
  > `npm version` will increment version number in `package.json` files, commits the changes, tags that commit as the new version, and pushes commits and tags to GitHub.
- Create Pull Request
- Merge created Pull Request
- Go to project's GitHub main page **Releases**
- Select **Draft a new release**
- Select **Choose a tag**. Choose the newest generated version tag from a list
- If necessary choose from **Previous tag** dropdown, the version you want to compare to. Otherwise use default 'Previous tag: auto'
- Select **Generate release notes**
- Replace **What's Changed** heading with a current date
- Check from **Preview** that everything looks correct
- Check that **Set as the latest release** checkbox is selected
- Publish release
- Check that the npm package has [updated to latest version](https://www.npmjs.com/package/@funidata/ngx-fudis)

### Note!

If something goes wrong with the release, create a new patch version instead of trying to fix already published version. Overwriting released version might produce unwanted concequences with the work of other project developers.
