services:
  fudis-storybook:
    build:
      context: ./ngx-fudis/
      target: dev
    image: fudis
    container_name: fudis-storybook
    tty: true
    ports:
      - 6006:6006
    environment:
      - STORYBOOK_FUDIS_VERSION=${BRANCH_NAME}
    volumes:
      - ./ngx-fudis/projects/ngx-fudis/src:/usr/src/app/projects/ngx-fudis/src
      - ./ngx-fudis/projects/documentation:/usr/src/app/projects/documentation

  fudis-sandbox:
    image: fudis
    container_name: fudis-sandbox
    command: npm start
    tty: true
    ports:
      - 4200:4200
    volumes:
      - ./ngx-fudis/projects/dev/src:/usr/src/app/projects/dev/src

  fudis-snapshot:
    build: ./snapshot
    container_name: fudis-snapshot
    environment:
      - CYPRESS_BASE_URL=http://fudis-storybook:6006
    working_dir: /usr/src
    volumes:
      - ./snapshot/cypress-image-diff-screenshots:/usr/src/cypress-image-diff-screenshots
